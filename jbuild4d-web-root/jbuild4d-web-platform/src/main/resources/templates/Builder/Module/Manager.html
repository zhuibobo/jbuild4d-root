<!DOCTYPE html><html lang="zh" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head><meta charset="UTF-8"><title>Title</title><th:block th:replace="Fragment/GeneralLib::GeneralLib"></th:block><th:block th:replace="Fragment/GeneralLib::IViewLib"></th:block><th:block th:replace="Fragment/GeneralLib::JQueryUILib"></th:block><th:block th:replace="Fragment/GeneralLib::ZTreeLib"></th:block><th:block th:replace="Fragment/GeneralLib::TreeTableLib"></th:block><th:block th:replace="Fragment/GeneralLib::ThemesLib"></th:block></head><body><div id="appList" class="list-2column"><div class="left-outer-wrap-c"><div class="left-page-c" style="width:250px"><div class="tool-bar-c"><div alt="新增分类组" title="新增分类组" class="add" @click="addModule()"></div><div alt="修改分类组" title="修改分类组" class="edit" @click="editModule()"></div><div alt="删除分类组" title="删除分类组" class="del" @click="delModule()"></div><div alt="浏览分类组" title="浏览分类组" class="view" @click="viewModule()"></div><div alt="上移" title="上移" class="order-up" @click="moveModule('up')"></div><div alt="下移" title="下移" class="order-down last" @click="moveModule('down')"></div></div><div><ul id="zTreeUL" class="ztree"></ul></div></div></div><div class="right-outer-wrap-c" style="padding:10px;left:260px"><tabs><tab-pane label="表单设计"><div style="width:100%"><div id="list-button-wrap" class="list-button-outer-wrap"><div class="list-button-inner-wrap"><i-button type="success" @click="form_add()"><icon type="plus"></icon>新增</i-button><i-button type="success" @click="form_add()"><icon type="plus"></icon>引入URL</i-button><i-button type="primary" @click="statusEnable('启用')"><icon type="checkmark-round"></icon>复制</i-button><i-button type="primary" @click="statusEnable('禁用')"><icon type="minus-round"></icon>预览</i-button><i-button type="primary" @click="statusEnable('禁用')"><icon type="minus-round"></icon>历史版本</i-button><i-button type="primary" @click="statusEnable('禁用')"><icon type="minus-round"></icon>复制ID</i-button><i-button type="primary" @click="move('up')"><icon type="arrow-up-b"></icon>上移</i-button><i-button type="primary" @click="move('down')"><icon type="arrow-down-b"></icon>下移</i-button></div><div style="clear:both"></div></div><i-table :height="listHeight" stripe border :columns="columnsConfig" :data="tableData" class="iv-list-table" :highlight-row="true" @on-selection-change="selectionChange"></i-table><div style="float:right" id="list-pager-wrap"><page @on-change="changePage" :current.sync="pageNum" :page-size="pageSize" show-total :total="pageTotal"></page></div></div></tab-pane><tab-pane label="APP表单设计"></tab-pane><tab-pane label="列表设计"><div style="width:100%"></div></tab-pane><tab-pane label="APP列表设计"></tab-pane><tab-pane label="流程设计"><div style="width:100%;height:60px"></div></tab-pane><tab-pane label="报表设计"><div style="width:100%;height:60px"></div></tab-pane><tab-pane label="相关设置"><div style="width:100%;height:60px"></div></tab-pane></tabs></div></div><script>var appList=new Vue({el:"#appList",mounted:function(){this.initTree(),window.setTimeout(function(){appList.listHeight=ListPageUtility.GetGeneralPageHeight(-80)},500)},data:{acInterface:{getModuleData:"/PlatForm/Builder/Module/GetTreeData",moduleEditView:"/PlatForm/Builder/Module/DetailView",deleteModule:"/PlatForm/Builder/Module/Delete",moveModule:"/PlatForm/Builder/Module/Move",form:{designView:"/PlatForm/Builder/Form/DetailView"}},treeIdFieldName:"moduleId",treeObj:null,treeSelectedNode:null,treeSetting:{async:{enable:!0,url:""},data:{key:{name:"moduleText"},simpleData:{enable:!0,idKey:"moduleId",pIdKey:"moduleParentId",rootId:0}},callback:{onClick:function(e,t,i){appList.treeNodeSelected(e,t,i)},onAsyncSuccess:function(e,t,i,l){appList.treeObj.expandAll(!0)}}},idFieldName:"ddtlId",columnsConfig:[{type:"selection",width:60,align:"center"},{title:"ddtlKey",key:"ddtlKey",align:"center"},{title:"ddtlName",key:"ddtlName",align:"center"},{title:"ddtlDesc",key:"ddtlDesc"},{title:"ddtlStatus",width:100,align:"center",key:"ddtlStatus"},{title:"CT",key:"ddtlCreatetime",width:100,align:"center",render:function(e,t){return ListPageUtility.IViewTableRenderer.ToDateYYYY_MM_DD(e,t.row.ddtlCreatetime)}},{title:"操作",key:"dictGroupId",width:120,align:"center",render:function(e,t){return e("div",{class:"list-row-button-wrap"},[ListPageUtility.IViewTableInnerButton.ViewButton(e,t,appList.idFieldName,appList),ListPageUtility.IViewTableInnerButton.EditButton(e,t,appList.idFieldName,appList),ListPageUtility.IViewTableInnerButton.DeleteButton(e,t,appList.idFieldName,appList)])}}],tableData:[],selectionRows:null,pageTotal:0,pageSize:12,pageNum:1,listHeight:300},methods:{initTree:function(){this.treeSetting.async.url=BaseUtility.BuildAction(this.acInterface.getModuleData,{}),this.treeObj=$.fn.zTree.init($("#zTreeUL"),this.treeSetting)},treeNodeSelected:function(e,t,i){this.treeSelectedNode=i},addModule:function(){if(null!=this.treeSelectedNode){var e=BaseUtility.BuildAction(this.acInterface.moduleEditView,{op:"add",parentId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,e,{title:"模块分组"},2)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择父节点!",null)},editModule:function(){if(null!=this.treeSelectedNode){var e=BaseUtility.BuildAction(this.acInterface.moduleEditView,{op:"update",recordId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,e,{title:"模块分组"},2)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择需要编辑的节点!",null)},viewModule:function(){var e=BaseUtility.BuildAction(this.acInterface.moduleEditView,{op:"view",recordId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,e,{title:"模块分组"},2)},delModule:function(){var e=this,t=this.treeSelectedNode[appList.treeIdFieldName];DialogUtility.Confirm(window,"确认要删除选定的节点吗？",function(){AjaxUtility.Post(e.acInterface.deleteModule,{recordId:t},function(e){e.success?DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){appList.treeObj.removeNode(appList.treeSelectedNode),appList.treeSelectedNode=null}):DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){})},"json")})},moveModule:function(t){if(null!=this.treeSelectedNode){var e=this.treeSelectedNode[appList.treeIdFieldName];AjaxUtility.Post(this.acInterface.moveModule,{recordId:e,type:t},function(e){e.success?DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,function(){"down"==t?null!=appList.treeSelectedNode.getNextNode()&&appList.treeObj.moveNode(appList.treeSelectedNode.getNextNode(),appList.treeSelectedNode,"next",!1):null!=appList.treeSelectedNode.getPreNode()&&appList.treeObj.moveNode(appList.treeSelectedNode.getPreNode(),appList.treeSelectedNode,"prev",!1)}):DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},e.message,null)},"json")}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择需要编辑的节点!",null)},newTreeNode:function(e){appList.treeObj.addNodes(this.treeSelectedNode,e,!1)},updateNode:function(e){this.treeSelectedNode=$.extend(!0,this.treeSelectedNode,e),appList.treeObj.updateNode(this.treeSelectedNode)},form_add:function(){if(null!=this.treeSelectedNode){var e=BaseUtility.BuildAction(this.acInterface.form.designView,{op:"add",moduleId:this.treeSelectedNode[appList.treeIdFieldName]});DialogUtility.OpenNewWindow(window,DialogUtility.DialogId,e,{width:0,height:0},2)}else DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"请选择模块!",null)},clearSearchCondition:function(){for(var e in this.searchCondition)this.searchCondition[e].value=""},selectionChange:function(e){this.selectionRows=e},reloadData:function(){ListPageUtility.IViewTableLoadDataSearch(this.acInterface.reloadListData,this.pageNum,this.pageSize,this.searchCondition,this,this.idFieldName,!0,null,!1)},edit:function(e){var t=BaseUtility.BuildAction(this.acInterface.listEditView,{op:"update",recordId:e});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,t,{title:"列表"},2)},view:function(e){var t=BaseUtility.BuildAction(this.acInterface.listEditView,{op:"view",recordId:e});DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,t,{title:"列表"},2)},del:function(e){ListPageUtility.IViewTableDeleteRow(this.acInterface.deleteListRecord,e,appList)},statusEnable:function(e){ListPageUtility.IViewChangeServerStatusFace(this.acInterface.listStatusChange,this.selectionRows,appList.idFieldName,e,appList)},move:function(e){ListPageUtility.IViewMoveFace(this.acInterface.listMove,this.selectionRows,appList.idFieldName,e,appList)},changePage:function(e){this.pageNum=e,this.reloadData(),this.selectionRows=null},search:function(){this.pageNum=1,this.reloadData()}}})</script></body></html>